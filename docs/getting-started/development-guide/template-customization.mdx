import { Meta } from '@storybook/blocks';
import { PageOutline } from '../../components/PageOutline';

<Meta title="Getting Started/Development Guide/Template Configuration" />

# Template Configuration

The Infermedica Component Library is a highly configurable UI components library.
You can adjust the default style of the components to your design but that may not enough.
Below you'll find information about props and how you can configure the template of a component.

<PageOutline/>

## Props
Props allows you to configure component behavior and assign some data to it. Generally, props is used to set component behavior, translations, and attributes when working with nested components (in Molecules and Organisms).
For content in Atoms, we use slots. For example, `UiButton` doesn't have any content props but instead uses a `default` slot to set content. More complex components allow you to set content by using props like `title`, `description`, etc.
You can find all of the props on the component docs page. Each component has an export type for their props. You can easily import this type by adding the Props suffix to the component name. For example, when importing the `UiButton` component, you'd type:

```js
import type { ButtonProps } from "@infermedica/component-library";
```


## Attrs props
Nested components can be set up by using `Attrs` props i.e. you can pass props to UiButton, UiText etc. inside of the more complex components. Each component exports a type for fallthrough attributes as well. You can import them
by adding the AttrsProps prefix to the component name.

For example, from the `UiNumberStepper` component:

```html
<template>
  <UiButton
    v-bind="buttonDecrementAttrs"
  >
    ...
  </UiButton>
</template>
```

You can pass props, `html` attributes, and events e.g.
```js
import type { ButtonAttrsProps } from "@infermedica/component-library";

const buttonDecrementAttrs: <ButtonAttrsProps> = {
  'aria-label': 'decrement age',
  'data-testid': 'decrement-button',
  onClick: () => {
    console.log('decrement');
  },
}
```

When changing the default tag of a component, it may also be necessary to change the type of the attributes. By adding the correct argument for the generic type, you can ensure that the attributes
passed to the component are valid and have the expected types. The default value provided is `HTMLAttributes`.
```js
import type { AnchorHTMLAttributes } from 'vue';
import type { ButtonAttrsProps } from "@infermedica/component-library";

const buttonDecrementAttrs: <ButtonAttrsProps<AnchorHTMLAttributes>> = {
  tag: 'a',
  rel: 'external',
  'aria-label': 'decrement age',
  'data-testid': 'decrement-button',
  onClick: () => {
    console.log('decrement');
  },
}
```

Our implementation of Attrs props allows you to change the "default" values of nested components i.e. You can change the heading level by using props or change the default icon without changing the template by using a slot.

Generally to name this props, we used `<name-of-component-without-prefix><element-name>Attrs` e.g. `closeButtonAttrs` or `decrementButtonAttrs`.
Please don't use generic names even if it is only one element in the component. E.g. `iconAttrs` is not a good name; `iconRemoveAttrs` should be used instead.


## Translation props
More complex components like `UiDatepicker` contain some labels like `day`, `month`, `year`, etc. To set these labels, we use `translation` props. Generally, this props is an object with keys and values. e.g.

```js
const translation = {
  day: "day",
  month: "month",
  year: "year",
  placeholderDay: "DD",
  placeholderMonth: "MM",
  placeholderYear: "YYYY",
  errorWrongDate: "Please enter a valid date, e.g. 05/11/1990",
  errorDateInFuture: "Sorry, the date of birth cannot be a future date",
  errorOutOfBounds: "Sorry, our checkup only covers people between 0 and 120 years old"
}
```

All of the possible translations keys are on the component docs page as the default value of props. By default, the labels provided by components are in English.

## Slots
Slots is a way to handle whole edge cases that a user would like to cover well. Slots are especially useful for markup changes.
Every component in the Infermedica Component Library has a slot. When naming them, we use the BEM convention e.g `<UiButton class="ui-range__decrement"...` is placed in the `decrement` slot
Each of the elements is wrapped into a Vue slot to let you replace parts or use HTML markup.

```html
<UiCheckbox>
 <template #checkbutton>
   <!-- your HTML markup -->
 </template>
</UiCheckbox>
```

### Data binding
We bind all of the required data (mostly the data from the default template) to the slot. The list of bound data is in the code of the stories that are named `With ... Slot`.
Below you can find an example of the data bound to the `checkbutton` slot in `UiCheckbox`.

```html
<UiCheckbox>
 <template #checkbutton="{ checked }">
    <template v-if="checked">
      <!-- your HTML markup -->
    </template>
    <template v-else>
     <!-- your HTML markup -->
    </template>
 </template>
</UiCheckbox>
```

This is the same way that you can configure any components in Infermedica's Component Library Kit.

### Internal components
Some components - like `UiAccordion`, `UiMegaMenu`, `UiDropdown`, etc. - have internal components. E.g. `UiDropdown` uses `UiDropdownItem` and works like select.
```html
<UiDropdown
  v-model="someValue"
  ...
>
  <template
    v-for="(item, key) in items"
    :key="key"
  >
    <UiDropdownItem :value="item">
      <!-- your HTML markup -->
    </UiDropdownItem>
  </template>
</UiDropdown>
```
In these cases, we use `provide/inject` to "connect" the `UiDropdown` component with the `UiDropdownItem` component and use `v-model` to set the value

{/* fixme: allow to use internal components in the easiest way */}
Unfortunately to use internal components like `UiDropdownItem`, you must import them directly from the package.
```js
import { UiDropdownItem } from '@infermedica/component-library';
import UiDropdownItem from '@infermedica/component-library/src/components/molecules/UiDropdown/_internal/UiDropdownItem.vue';
```

## Proxy components
In some cases, when you add a custom template to a component or override styles, you may need a proxy component.
A proxy component is a wrapper for the Infermedica Component Library that has some changes or improvements. e.g.

```html
<template>
  <UiCard class="triage-card">
    <template #details>
      <UiHeading
        :level="4"
        style="margin: var(--space-24) 0 var(--space-8) 0"
      >
        Symptoms:
      </UiHeading>
      <UiBulletPoints :items="symptoms"/>
    </template>
  </UiCard>
</template>

<script setup>
import {UiCard, UiHeading, UiBulletPoints} from '@infermedica/component-library';

defineProps({
  symptoms: {
    type: Object,
    default: () => ({})
  }
})
</script>
```

### Props
When a component from the library is a root of the proxy component, you can use it's props directly. In cases where the library component is deeper, you can use the Attrs props pattern and add props to allow data to be passed to it.

### Slots
When you create a proxy component, you'll probably want to use the library component with slots. Unfortunately, this won't work right out of the box. But don't worry. We have a solution.

```html
<template>
  <UiCard class="triage-card">
    <template
      v-for="(_, name) in $slots"
      #[name]="data"
    >
      <slot
        :name="name"
        v-bind="data"
      />
    </template>
    <template #details>
      <UiHeading
        :level="4"
        style="margin: var(--space-24) 0 var(--space-8) 0"
      >
        Symptoms:
      </UiHeading>
      <UiBulletPoints :items="symptoms"/>
    </template>
  </UiCard>
</template>
```

As you can see, you can use all of the `UiCard` slots and override the `details` slot with custom content.
